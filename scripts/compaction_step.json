{
  "Name": "iceberg_delete_compaction",
  "ActionOnFailure": "CONTINUE",
  "HadoopJarStep": {
    "Jar": "command-runner.jar",
    "Args": [
      "bash",
      "-lc",
      "timeout 20m bash -lc 'TABLE_IDENT=glue_catalog.federation_demo_db_ryan.customers_iceberg spark-shell \\\n        --master local[2] \\\n        --conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\n        --conf spark.sql.catalog.glue_catalog=org.apache.iceberg.spark.SparkCatalog \\\n        --conf spark.sql.catalog.glue_catalog.catalog-impl=org.apache.iceberg.aws.glue.GlueCatalog \\\n        --conf spark.sql.catalog.glue_catalog.io-impl=org.apache.iceberg.aws.s3.S3FileIO \\\n        --conf spark.sql.catalog.glue_catalog.warehouse=s3://glue-federation-demo-332745928618/ \\\n        --conf spark.hadoop.fs.s3a.aws.credentials.provider=com.amazonaws.auth.InstanceProfileCredentialsProvider \\\n        -i /home/hadoop/compaction.scala' <<< ':quit'"
    ]
  }
}